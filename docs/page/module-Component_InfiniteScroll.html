<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Component/InfiniteScroll - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Modal.html">Modal</a></li></ul><h3>Modules</h3><ul><li><a href="module-Component_ActionSheet.html">Component/ActionSheet</a><ul class='methods'><li data-type='method'><a href="module-Component_ActionSheet.html#~dismiss">dismiss</a></li><li data-type='method'><a href="module-Component_ActionSheet.html#~present">present</a></li></ul></li><li><a href="module-Component_Alert.html">Component/Alert</a><ul class='methods'><li data-type='method'><a href="module-Component_Alert.html#~dismiss">dismiss</a></li><li data-type='method'><a href="module-Component_Alert.html#~present">present</a></li></ul></li><li><a href="module-Component_App.html">Component/App</a><ul class='methods'><li data-type='method'><a href="module-Component_App.html#~isEnabled">isEnabled</a></li><li data-type='method'><a href="module-Component_App.html#~isScrolling">isScrolling</a></li><li data-type='method'><a href="module-Component_App.html#~setDisableScroll">setDisableScroll</a></li><li data-type='method'><a href="module-Component_App.html#~setEnabled">setEnabled</a></li><li data-type='method'><a href="module-Component_App.html#~setTitle">setTitle</a></li></ul></li><li><a href="module-Component_Backdrop.html">Component/Backdrop</a></li><li><a href="module-Component_Content.html">Component/Content</a><ul class='methods'><li data-type='method'><a href="module-Component_Content.html#~getContentDimensions">getContentDimensions</a></li><li data-type='method'><a href="module-Component_Content.html#~resize">resize</a></li><li data-type='method'><a href="module-Component_Content.html#~scrollTo">scrollTo</a></li><li data-type='method'><a href="module-Component_Content.html#~scrollToBottom">scrollToBottom</a></li><li data-type='method'><a href="module-Component_Content.html#~scrollToTop">scrollToTop</a></li></ul></li><li><a href="module-Component_Footer.html">Component/Footer</a></li><li><a href="module-Component_Grid.html">Component/Grid</a></li><li><a href="module-Component_Header.html">Component/Header</a></li><li><a href="module-Component_Icon.html">Component/Icon</a></li><li><a href="module-Component_Img.html">Component/Img</a></li><li><a href="module-Component_InfiniteScroll.html">Component/InfiniteScroll</a><ul class='methods'><li data-type='method'><a href="module-Component_InfiniteScroll.html#~complete">complete</a></li><li data-type='method'><a href="module-Component_InfiniteScroll.html#~enable">enable</a></li><li data-type='method'><a href="module-Component_InfiniteScroll.html#~waitFor">waitFor</a></li></ul></li><li><a href="module-Component_Label.html">Component/Label</a></li><li><a href="module-Component_Loading.html">Component/Loading</a></li><li><a href="module-Component_Refresher.html">Component/Refresher</a><ul class='methods'><li data-type='method'><a href="module-Component_Refresher.html#~cancel">cancel</a></li><li data-type='method'><a href="module-Component_Refresher.html#~complete">complete</a></li></ul></li><li><a href="module-Component_Spinner.html">Component/Spinner</a></li><li><a href="module-Component_Tab.html">Component/Tab</a></li><li><a href="module-Component_Tabs.html">Component/Tabs</a><ul class='methods'><li data-type='method'><a href="module-Component_Tabs.html#~getActivatedIndex">getActivatedIndex</a></li><li data-type='method'><a href="module-Component_Tabs.html#~getByIndex">getByIndex</a></li><li data-type='method'><a href="module-Component_Tabs.html#~getSelected">getSelected</a></li><li data-type='method'><a href="module-Component_Tabs.html#~select">select</a></li></ul></li><li><a href="module-Component_Toast.html">Component/Toast</a></li><li><a href="module-Component_Toggle.html">Component/Toggle</a></li></ul><h3>Events</h3><ul><li><a href="global.html#event:onInfinite">onInfinite</a></li><li><a href="global.html#event:onScroll">onScroll</a></li><li><a href="global.html#event:onScrollEnd">onScrollEnd</a></li><li><a href="global.html#event:onScrollStart">onScrollStart</a></li></ul><h3>Global</h3><ul><li><a href="global.html#dismiss">dismiss</a></li><li><a href="global.html#getAnInstance">getAnInstance</a></li><li><a href="global.html#Input/Textarea">Input/Textarea</a></li><li><a href="global.html#present">present</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">Component/InfiniteScroll</h1>
    

    




<section>

<header>
    
        
            
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description"><p>当页面滚动到页面底部一定距离时, InfiniteScroll组件会触发<code>onInfinite</code>事件,
通过回调传入的参数<code>infiniteScroll</code>来处理对应的状态.</p>
<p>比如: 当需要异步请求AJAX数据时, 数据请求后, 需要执行<code>infiniteScroll.complete()</code>
来变更InfiniteScroll组件的状态,当继续向下滚动时, 还能继续出发<code>onInfinite</code>事件,
如此往复.</p>
<p>当通过AJAX请求的数据已经全部请求完毕(没有更多的数据时), 则执行<code>infiniteScroll.enable(false)</code>,
表明InfiniteScroll任务全部结束. 此时, 将解除对Content组件的<code>onContentScroll</code>事件的监听</p>
<p>InfiniteScroll组件会附带InfiniteScrollContent组件, InfiniteScrollContent组件
是默认的显示组件,它只是起到显示状态的作用, 你也可以自己定义显示状态, 只要写好相应的css样式就好.</p>
<p>其中, 标示状态的<code>state</code>有三种值: enabled/disabled/loading.</p>
<p><strong>建议</strong>: 首屏的数据至少占满两个以上屏幕高度, 通过 InfiniteScroll 加载的数据也至少能占满两个以上的屏幕高度,
这样的体验效果会好点</p>
<p><strong>注意</strong>: 组件中的方法是在事件的回调参数中定义的.</p>
<h5>Usage</h5><pre class="prettyprint source"><code>&lt;InfiniteScroll threshold=&quot;20%&quot; @onInfinite=&quot;onInfinite&quot;>
   &lt;InfiniteScrollContent loadingSpinner=&quot;ios&quot; loadingText=&quot;正在加载...&quot;>&lt;/InfiniteScrollContent>
   &lt;h5 class=&quot;loadedAll&quot; text-center>全部加载完毕&lt;/h5>
&lt;/InfiniteScroll></code></pre><pre class="prettyprint source"><code> .ion-infinite-scroll{
     .loadedAll{
         display: none;
     }
  }
 .ion-infinite-scroll[state=disabled]{
     .loadedAll{
         display: block;
     }
 }</code></pre><pre class="prettyprint source"><code>// ....
methods: {
   onInfinite(infiniteScroll){
     let _start = this.i;
     if(_start &lt; 40){
       setTimeout(() => {
         for (; (10 + _start) > this.i; this.i++) {
          this.list.push(`item - ${this.i}`)
        }
        // 当前异步完成
        infiniteScroll.complete();
      }, 100)
    }else{
      // 当前异步结束, 没有新数据了
      infiniteScroll.enable(false);
    }
 }
 // ....</code></pre></div>
        

        
            




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="infinite-scroll_infinite-scroll.vue.html">infinite-scroll/infinite-scroll.vue</a>, <a href="infinite-scroll_infinite-scroll.vue.html#line9">line 9</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>



    <h5 class="subsection-title">Properties:</h5>

    

<table class="props">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>enabled</code></td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                
                </td>
            

            
                <td class="default">
                
                    <code>true</code>
                
                </td>
            

            <td class="description last"><p>设置当前组件的可用状态, 如果为false, 则移除当前组件绑定的全部事件处理函数, 隐藏组件并且将状态设置为disabled</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>threshold</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                
                </td>
            

            
                <td class="default">
                
                    <code>'15%'</code>
                
                </td>
            

            <td class="description last"><p>激活<code>onInfinite</code>事件的阈值. 阈值可以使百分比也可以是具体的px值. 如果为百分比(10%), 则距离底部10%的位置将为激活点; 如果为具体px值(100px), 则页面底部向下100px出为激活点.</p></td>
        </tr>

    
    </tbody>
</table>




















<h5>Fires:</h5>
<ul>
    <li><a href="global.html#event:onInfinite">event:onInfinite</a></li>
</ul>











        
    
    </div>

    

    

    

     

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    <h4 class="name" id="~complete"><span class="type-signature">(inner) </span>complete<span class="signature">()</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="infinite-scroll_infinite-scroll.vue.html">infinite-scroll/infinite-scroll.vue</a>, <a href="infinite-scroll_infinite-scroll.vue.html#line137">line 137</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>在 <code>onInfinite</code> 事件的回调中(参数为当前InfiniteScroll组件的this)执行<code>complete()</code>这个方法, 表示异步操作完毕.
比如在异步情况下通过AJAX获取数据增加新行列, 数据获取完毕更新UI后, 执行<code>complete()</code>这个方法,
表示loading已经完成, InfiniteScroll组件的状态将由<code>loading</code> 转为 <code>enabled</code>.</p>
</div>

























        
            

    

    <h4 class="name" id="~enable"><span class="type-signature">(inner) </span>enable<span class="signature">(shouldEnable)</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="infinite-scroll_infinite-scroll.vue.html">infinite-scroll/infinite-scroll.vue</a>, <a href="infinite-scroll_infinite-scroll.vue.html#line152">line 152</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>设置InfiniteScroll组件的状态. 当在已经没有数据或者不再需要InfiniteScroll组件时执行这个方法.
需要在<code>onInfinite</code> 事件的回调中执行 <code>infiniteScroll.enable(false)</code>.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>shouldEnable</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            

            

            <td class="description last"><p>组件当前状态, 如果为<code>false</code>, 则移除scroll的所有监听函数, 并隐藏组件</p></td>
        </tr>

    
    </tbody>
</table>
















        
            

    

    <h4 class="name" id="~waitFor"><span class="type-signature">(inner) </span>waitFor<span class="signature">(action)</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="infinite-scroll_infinite-scroll.vue.html">infinite-scroll/infinite-scroll.vue</a>, <a href="infinite-scroll_infinite-scroll.vue.html#line164">line 164</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>传入Promise对象, 在传入的Promise完成数据的加载, 当加载完毕执行<code>resolve()</code>, 这个<code>resolve()</code>
在这里相当于执行了<code>this.complete()</code>, 用法如下所示</p>
</div>









    <h5>Examples</h5>
    
    <pre class="prettyprint"><code>&lt;Content>
 &lt;List>
     &lt;Item v-for="item of items">{{item}}&lt;/Item>
 &lt;/List>
 &lt;InfiniteScroll @onInfinite="$event.waitFor(doInfinite())">
     &lt;InfiniteScrollContent>&lt;/InfiniteScrollContent>
 &lt;/InfiniteScroll>
&lt;/Content></code></pre>

    <pre class="prettyprint"><code>// ...
  doInfinite(){
    console.log('Begin async operation');
    return new Promise((resolve) => {
      setTimeout(() => {
        for (var i = 0; i &lt; 30; i++) {
          this.items.push( this.items.length );
        }
        console.log('Async operation has ended');
        resolve();
      }, 500);
    })
}
// ...</code></pre>




    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>action</code></td>
            

            <td class="type">
            
                
<span class="param-type">Promise</span>


            
            </td>

            

            

            <td class="description last"><p>执行方法</p></td>
        </tr>

    
    </tbody>
</table>
















        
    

    

    
</article>

</section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Wed Mar 22 2017 21:00:31 GMT+0800 (CST) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>