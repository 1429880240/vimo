<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>components/region-picker/region-picker.vue - Documentation</title>
    <meta name="viewport"
          content="width=device-width, initial-scale=1, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <link type="text/css" rel="stylesheet" href="styles/custom.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>

    <section class="vimo">
        <div class="vimo__imgBox">
            <img class="vimo__imgBox--img" src="./asset/img/vimo.png">
        </div>

        <div class="vimo__title">
            <h2>VIMO</h2>
            <!--<p>beta</p>-->
            <p>基于Vue2.x的移动端Hybrid框架</p>
        </div>
        <div class="vimo__iframe">
            <iframe src="https://ghbtns.com/github-btn.html?user=DTFE&amp;repo=Vimo&amp;type=star&amp;count=true"
                    frameborder="0" scrolling="0" width="110px" height="20px"
                    class="enter-transition"
                    style=""></iframe>
            <iframe src="https://ghbtns.com/github-btn.html?user=DTFE&amp;repo=Vimo&amp;type=fork&amp;count=true"
                    frameborder="0" scrolling="0" width="95px" height="20px"
                    class="enter-transition"
                    style=""></iframe>
        </div>

    </section>

    <section class="nav__header"><h2><a href="index.html">首页 / Home</a></h2><h2><a href="https://github.com/DTFE/vimo-start-kit">如何开始 / How To Start</a></h2><h2><a href="http://xiangsongtao.com/vimo">示例 / Demo</a></h2><h2><a href="https://github.com/DTFE/Vimo/blob/master/CHANGELOG.md">更新日志 / Change Log</a></h2><h2><a href="https://github.com/DTFE/vimo-code-style/blob/master/README.md">代码规范 / Code Standard</a></h2><h2><a href="#">常见问题 / Question</a></h2></section><h3>组件 / Components</h3><ul><li><a href="component-ActionSheet.html">ActionSheet</a><ul class='methods'><li data-type='method'><a href="component-ActionSheet.html#~dismiss">dismiss</a></li><li data-type='method'><a href="component-ActionSheet.html#~present">present</a></li></ul></li><li><a href="component-Alert.html">Alert</a><ul class='methods'><li data-type='method'><a href="component-Alert.html#~dismiss">dismiss</a></li><li data-type='method'><a href="component-Alert.html#~present">present</a></li></ul></li><li><a href="component-Avatar.html">Avatar</a></li><li><a href="component-Backdrop.html">Backdrop</a></li><li><a href="component-Badge.html">Badge</a></li><li><a href="component-Base_App.html">Base/App</a><ul class='methods'><li data-type='method'><a href="component-Base_App.html#~isEnabled">isEnabled</a></li><li data-type='method'><a href="component-Base_App.html#~isScrolling">isScrolling</a></li><li data-type='method'><a href="component-Base_App.html#~setClass">setClass</a></li><li data-type='method'><a href="component-Base_App.html#~setDisableScroll">setDisableScroll</a></li><li data-type='method'><a href="component-Base_App.html#~setDocTitle">setDocTitle</a></li><li data-type='method'><a href="component-Base_App.html#~setEnabled">setEnabled</a></li><li data-type='method'><a href="component-Base_App.html#~setScrolling">setScrolling</a></li></ul></li><li><a href="component-Base_Content.html">Base/Content</a><ul class='methods'><li data-type='method'><a href="component-Base_Content.html#~getContentDimensions">getContentDimensions</a></li><li data-type='method'><a href="component-Base_Content.html#~resize">resize</a></li><li data-type='method'><a href="component-Base_Content.html#~scrollBy">scrollBy</a></li><li data-type='method'><a href="component-Base_Content.html#~scrollTo">scrollTo</a></li><li data-type='method'><a href="component-Base_Content.html#~scrollToBottom">scrollToBottom</a></li><li data-type='method'><a href="component-Base_Content.html#~scrollToElement">scrollToElement</a></li><li data-type='method'><a href="component-Base_Content.html#~scrollToTop">scrollToTop</a></li></ul></li><li><a href="component-Base_Footer.html">Base/Footer</a><ul class='methods'><li data-type='method'><a href="component-Base_Footer.html#~hide">hide</a></li><li data-type='method'><a href="component-Base_Footer.html#~setStyle">setStyle</a></li><li data-type='method'><a href="component-Base_Footer.html#~show">show</a></li><li data-type='method'><a href="component-Base_Footer.html#~toggle">toggle</a></li></ul></li><li><a href="component-Base_Header.html">Base/Header</a><ul class='methods'><li data-type='method'><a href="component-Base_Header.html#~hide">hide</a></li><li data-type='method'><a href="component-Base_Header.html#~setStyle">setStyle</a></li><li data-type='method'><a href="component-Base_Header.html#~show">show</a></li><li data-type='method'><a href="component-Base_Header.html#~toggle">toggle</a></li></ul></li><li><a href="component-Base_Nav.html">Base/Nav</a></li><li><a href="component-Base_Page.html">Base/Page</a></li><li><a href="component-Button.html">Button</a></li><li><a href="component-Buttons.html">Buttons</a></li><li><a href="component-Card.html">Card</a></li><li><a href="component-Checkbox.html">Checkbox</a></li><li><a href="component-Column.html">Column</a></li><li><a href="component-Datetime.html">Datetime</a></li><li><a href="component-Fab.html">Fab</a><ul class='methods'><li data-type='method'><a href="component-Fab.html#~close">close</a></li></ul></li><li><a href="component-FabButton.html">FabButton</a></li><li><a href="component-FabList.html">FabList</a></li><li><a href="component-Grid.html">Grid</a></li><li><a href="component-Icon.html">Icon</a></li><li><a href="component-Img.html">Img</a></li><li><a href="component-Indicator.html">Indicator</a><ul class='methods'><li data-type='method'><a href="component-Indicator.html#~dismiss">dismiss</a></li><li data-type='method'><a href="component-Indicator.html#~present">present</a></li></ul></li><li><a href="component-InfiniteScroll.html">InfiniteScroll</a><ul class='methods'><li data-type='method'><a href="component-InfiniteScroll.html#~complete">complete</a></li><li data-type='method'><a href="component-InfiniteScroll.html#~enable">enable</a></li><li data-type='method'><a href="component-InfiniteScroll.html#~waitFor">waitFor</a></li></ul></li><li><a href="component-InfiniteScrollContent.html">InfiniteScrollContent</a></li><li><a href="component-Input.html">Input</a></li><li><a href="component-Item.html">Item</a></li><li><a href="component-ItemCollapse.html">ItemCollapse</a></li><li><a href="component-ItemGroup.html">ItemGroup</a></li><li><a href="component-ItemOptions.html">ItemOptions</a></li><li><a href="component-ItemSliding.html">ItemSliding</a><ul class='methods'><li data-type='method'><a href="component-ItemSliding.html#~close">close</a></li><li data-type='method'><a href="component-ItemSliding.html#~getOpenAmount">getOpenAmount</a></li><li data-type='method'><a href="component-ItemSliding.html#~getSlidingPercent">getSlidingPercent</a></li><li data-type='method'><a href="component-ItemSliding.html#~openLeftOptions">openLeftOptions</a></li><li data-type='method'><a href="component-ItemSliding.html#~openRightOptions">openRightOptions</a></li></ul></li><li><a href="component-Label.html">Label</a></li><li><a href="component-List.html">List</a></li><li><a href="component-Loading.html">Loading</a><ul class='methods'><li data-type='method'><a href="component-Loading.html#~dismiss">dismiss</a></li><li data-type='method'><a href="component-Loading.html#~present">present</a></li></ul></li><li><a href="component-Menus.html">Menus</a><ul class='methods'><li data-type='method'><a href="component-Menus.html#~close">close</a></li><li data-type='method'><a href="component-Menus.html#~open">open</a></li><li data-type='method'><a href="component-Menus.html#~toggle">toggle</a></li></ul></li><li><a href="component-Modal.html">Modal</a><ul class='methods'><li data-type='method'><a href="component-Modal.html#~dismiss">dismiss</a></li><li data-type='method'><a href="component-Modal.html#~present">present</a></li></ul></li><li><a href="component-Navbar.html">Navbar</a></li><li><a href="component-Note.html">Note</a></li><li><a href="component-NoticeBar.html">NoticeBar</a><ul class='methods'><li data-type='method'><a href="component-NoticeBar.html#~close">close</a></li></ul></li><li><a href="component-Picker.html">Picker</a><ul class='methods'><li data-type='method'><a href="component-Picker.html#~dismiss">dismiss</a></li><li data-type='method'><a href="component-Picker.html#~present">present</a></li></ul></li><li><a href="component-Popover.html">Popover</a><ul class='methods'><li data-type='method'><a href="component-Popover.html#~dismiss">dismiss</a></li><li data-type='method'><a href="component-Popover.html#~present">present</a></li></ul></li><li><a href="component-Radio.html">Radio</a></li><li><a href="component-Range.html">Range</a></li><li><a href="component-Refresher.html">Refresher</a><ul class='methods'><li data-type='method'><a href="component-Refresher.html#~cancel">cancel</a></li><li data-type='method'><a href="component-Refresher.html#~complete">complete</a></li></ul></li><li><a href="component-RefresherContent.html">RefresherContent</a></li><li><a href="component-RegionPicker.html">RegionPicker</a></li><li><a href="component-Row.html">Row</a></li><li><a href="component-Scroll.html">Scroll</a></li><li><a href="component-SearchBar.html">SearchBar</a></li><li><a href="component-Segment.html">Segment</a></li><li><a href="component-SegmentButton.html">SegmentButton</a></li><li><a href="component-Select.html">Select</a></li><li><a href="component-Separation.html">Separation</a></li><li><a href="component-Slide.html">Slide</a></li><li><a href="component-SlideBox.html">SlideBox</a><ul class='methods'><li data-type='method'><a href="component-SlideBox.html#~cancel">cancel</a></li><li data-type='method'><a href="component-SlideBox.html#~checking">checking</a></li><li data-type='method'><a href="component-SlideBox.html#~complete">complete</a></li><li data-type='method'><a href="component-SlideBox.html#~fail">fail</a></li></ul></li><li><a href="component-Slides.html">Slides</a></li><li><a href="component-Spinner.html">Spinner</a></li><li><a href="component-Tab.html">Tab</a></li><li><a href="component-Tabs.html">Tabs</a><ul class='methods'><li data-type='method'><a href="component-Tabs.html#~getActivatedIndex">getActivatedIndex</a></li><li data-type='method'><a href="component-Tabs.html#~getByIndex">getByIndex</a></li><li data-type='method'><a href="component-Tabs.html#~getSelected">getSelected</a></li><li data-type='method'><a href="component-Tabs.html#~select">select</a></li></ul></li><li><a href="component-Thumbnail.html">Thumbnail</a></li><li><a href="component-Title.html">Title</a><ul class='methods'><li data-type='method'><a href="component-Title.html#~getTitle">getTitle</a></li><li data-type='method'><a href="component-Title.html#~setTitle">setTitle</a></li></ul></li><li><a href="component-Toast.html">Toast</a></li><li><a href="component-Toggle.html">Toggle</a></li><li><a href="component-Toolbar.html">Toolbar</a></li></ul><h3>类 / Classes</h3><ul><li><a href="Config.html">Config</a><ul class='methods'><li data-type='method'><a href="Config.html#get">get</a></li><li data-type='method'><a href="Config.html#getBoolean">getBoolean</a></li><li data-type='method'><a href="Config.html#getNumber">getNumber</a></li><li data-type='method'><a href="Config.html#set">set</a></li><li data-type='method'><a href="Config.html#settings">settings</a></li></ul></li><li><a href="History.html">History</a><ul class='methods'><li data-type='method'><a href="History.html#_init">_init</a></li><li data-type='method'><a href="History.html#canGoBack">canGoBack</a></li><li data-type='method'><a href="History.html#first">first</a></li><li data-type='method'><a href="History.html#getActive">getActive</a></li><li data-type='method'><a href="History.html#getDirection">getDirection</a></li><li data-type='method'><a href="History.html#getHistory">getHistory</a></li><li data-type='method'><a href="History.html#getPrevious">getPrevious</a></li><li data-type='method'><a href="History.html#indexOf">indexOf</a></li><li data-type='method'><a href="History.html#toRoot">toRoot</a></li></ul></li><li><a href="Platform.html">Platform</a><ul class='methods'><li data-type='method'><a href="Platform.html#dir">dir</a></li><li data-type='method'><a href="Platform.html#do">do</a></li><li data-type='method'><a href="Platform.html#height">height</a></li><li data-type='method'><a href="Platform.html#is">is</a></li><li data-type='method'><a href="Platform.html#isLandscape">isLandscape</a></li><li data-type='method'><a href="Platform.html#isPortrait">isPortrait</a></li><li data-type='method'><a href="Platform.html#isRTL">isRTL</a></li><li data-type='method'><a href="Platform.html#lang">lang</a></li><li data-type='method'><a href="Platform.html#navigatorPlatform">navigatorPlatform</a></li><li data-type='method'><a href="Platform.html#netType">netType</a></li><li data-type='method'><a href="Platform.html#platforms">platforms</a></li><li data-type='method'><a href="Platform.html#ready">ready</a></li><li data-type='method'><a href="Platform.html#registerMethod">registerMethod</a></li><li data-type='method'><a href="Platform.html#userAgent">userAgent</a></li><li data-type='method'><a href="Platform.html#versions">versions</a></li><li data-type='method'><a href="Platform.html#width">width</a></li></ul></li><li><a href="ScrollView.html">ScrollView</a><ul class='methods'><li data-type='method'><a href="ScrollView.html#scrollBy">scrollBy</a></li><li data-type='method'><a href="ScrollView.html#scrollTo">scrollTo</a></li><li data-type='method'><a href="ScrollView.html#scrollToBottom">scrollToBottom</a></li><li data-type='method'><a href="ScrollView.html#scrollToElement">scrollToElement</a></li><li data-type='method'><a href="ScrollView.html#scrollToTop">scrollToTop</a></li></ul></li></ul><h3>模块 / Modules</h3><ul><li><a href="module-datetime-util.html">datetime-util</a><ul class='methods'><li data-type='method'><a href="module-datetime-util.html#.convertDataToISO">convertDataToISO</a></li><li data-type='method'><a href="module-datetime-util.html#.convertFormatToKey">convertFormatToKey</a></li><li data-type='method'><a href="module-datetime-util.html#.dateDataSortValue">dateDataSortValue</a></li><li data-type='method'><a href="module-datetime-util.html#.dateSortValue">dateSortValue</a></li><li data-type='method'><a href="module-datetime-util.html#.dateValueRange">dateValueRange</a></li><li data-type='method'><a href="module-datetime-util.html#.daysInMonth">daysInMonth</a></li><li data-type='method'><a href="module-datetime-util.html#.getValueFromFormat">getValueFromFormat</a></li><li data-type='method'><a href="module-datetime-util.html#.isLeapYear">isLeapYear</a></li><li data-type='method'><a href="module-datetime-util.html#.parseDate">parseDate</a></li><li data-type='method'><a href="module-datetime-util.html#.parseTemplate">parseTemplate</a></li><li data-type='method'><a href="module-datetime-util.html#.renderDateTime">renderDateTime</a></li><li data-type='method'><a href="module-datetime-util.html#.renderTextFormat">renderTextFormat</a></li><li data-type='method'><a href="module-datetime-util.html#.updateDate">updateDate</a></li><li data-type='method'><a href="module-datetime-util.html#~fourDigit">fourDigit</a></li><li data-type='method'><a href="module-datetime-util.html#~threeDigit">threeDigit</a></li><li data-type='method'><a href="module-datetime-util.html#~twoDigit">twoDigit</a></li></ul></li><li><a href="module-Util.html">Util</a><ul class='methods'><li data-type='method'><a href="module-Util.html#.assign">assign</a></li><li data-type='method'><a href="module-Util.html#.clamp">clamp</a></li><li data-type='method'><a href="module-Util.html#.deepClone">deepClone</a></li><li data-type='method'><a href="module-Util.html#.defaults">defaults</a></li><li data-type='method'><a href="module-Util.html#.docReady">docReady</a></li><li data-type='method'><a href="module-Util.html#.firstUpperCase">firstUpperCase</a></li><li data-type='method'><a href="module-Util.html#.focusOutActiveElement">focusOutActiveElement</a></li><li data-type='method'><a href="module-Util.html#.hasClass">hasClass</a></li><li data-type='method'><a href="module-Util.html#.hasFocus">hasFocus</a></li><li data-type='method'><a href="module-Util.html#.hasFocusedTextInput">hasFocusedTextInput</a></li><li data-type='method'><a href="module-Util.html#.hashChange">hashChange</a></li><li data-type='method'><a href="module-Util.html#.hasPointerMoved">hasPointerMoved</a></li><li data-type='method'><a href="module-Util.html#.isActive">isActive</a></li><li data-type='method'><a href="module-Util.html#.isArray">isArray</a></li><li data-type='method'><a href="module-Util.html#.isBlank">isBlank</a></li><li data-type='method'><a href="module-Util.html#.isBoolean">isBoolean</a></li><li data-type='method'><a href="module-Util.html#.isCheckedProperty">isCheckedProperty</a></li><li data-type='method'><a href="module-Util.html#.isDate">isDate</a></li><li data-type='method'><a href="module-Util.html#.isDefined">isDefined</a></li><li data-type='method'><a href="module-Util.html#.isFunction">isFunction</a></li><li data-type='method'><a href="module-Util.html#.isNumber">isNumber</a></li><li data-type='method'><a href="module-Util.html#.isObject">isObject</a></li><li data-type='method'><a href="module-Util.html#.isPassive">isPassive</a></li><li data-type='method'><a href="module-Util.html#.isPlainObject">isPlainObject</a></li><li data-type='method'><a href="module-Util.html#.isPresent">isPresent</a></li><li data-type='method'><a href="module-Util.html#.isPrimitive">isPrimitive</a></li><li data-type='method'><a href="module-Util.html#.isRegexp">isRegexp</a></li><li data-type='method'><a href="module-Util.html#.isString">isString</a></li><li data-type='method'><a href="module-Util.html#.isTextInput">isTextInput</a></li><li data-type='method'><a href="module-Util.html#.isTrueProperty">isTrueProperty</a></li><li data-type='method'><a href="module-Util.html#.isUndefined">isUndefined</a></li><li data-type='method'><a href="module-Util.html#.merge">merge</a></li><li data-type='method'><a href="module-Util.html#.parsePxUnit">parsePxUnit</a></li><li data-type='method'><a href="module-Util.html#.pointerCoord">pointerCoord</a></li><li data-type='method'><a href="module-Util.html#.registerListener">registerListener</a></li><li data-type='method'><a href="module-Util.html#.removeArrayItem">removeArrayItem</a></li><li data-type='method'><a href="module-Util.html#.setElementClass">setElementClass</a></li><li data-type='method'><a href="module-Util.html#.transitionEnd">transitionEnd</a></li></ul></li></ul><h3>事件 / Events</h3><ul><li><a href="component-Backdrop.html#event:onHidden">onHidden</a></li><li><a href="component-Backdrop.html#event:onShown">onShown</a></li><li><a href="component-Base_Content.html#event:onScroll">onScroll</a></li><li><a href="component-Base_Content.html#event:onScrollEnd">onScrollEnd</a></li><li><a href="component-Base_Content.html#event:onScrollStart">onScrollStart</a></li><li><a href="component-Checkbox.html#event:onChange">onChange</a></li><li><a href="component-Datetime.html#event:onCancel">onCancel</a></li><li><a href="component-Datetime.html#event:onChange">onChange</a></li><li><a href="component-InfiniteScroll.html#event:onInfinite">onInfinite</a></li><li><a href="component-Input.html#event:onBlur">onBlur</a></li><li><a href="component-Input.html#event:onFocus">onFocus</a></li><li><a href="component-Input.html#event:onInput">onInput</a></li><li><a href="component-ItemSliding.html#event:onDrag">onDrag</a></li><li><a href="component-ItemSliding.html#event:onSwipe">onSwipe</a></li><li><a href="component-ItemSliding.html#event:onSwipeLeft">onSwipeLeft</a></li><li><a href="component-ItemSliding.html#event:onSwipeRight">onSwipeRight</a></li><li><a href="component-Menus.html#event:onMenuClosed">onMenuClosed</a></li><li><a href="component-Menus.html#event:onMenuClosing">onMenuClosing</a></li><li><a href="component-Menus.html#event:onMenuOpen">onMenuOpen</a></li><li><a href="component-Range.html#event:onChange">onChange</a></li><li><a href="component-Refresher.html#event:onPull">onPull</a></li><li><a href="component-Refresher.html#event:onRefresh">onRefresh</a></li><li><a href="component-Refresher.html#event:onStart">onStart</a></li><li><a href="component-SearchBar.html#event:onBlur">onBlur</a></li><li><a href="component-SearchBar.html#event:onCancel">onCancel</a></li><li><a href="component-SearchBar.html#event:onClear">onClear</a></li><li><a href="component-SearchBar.html#event:onFocus">onFocus</a></li><li><a href="component-SearchBar.html#event:onInput">onInput</a></li><li><a href="component-Segment.html#event:onChange">onChange</a></li><li><a href="component-Segment.html#event:onSelect">onSelect</a></li><li><a href="component-Select.html#event:onCancel">onCancel</a></li><li><a href="component-Select.html#event:onChange">onChange</a></li><li><a href="component-Select.html#event:onSelect">onSelect</a></li><li><a href="component-SlideBox.html#event:onSlideEnd">onSlideEnd</a></li><li><a href="component-Tabs.html#event:onTabChange">onTabChange</a></li><li><a href="component-Tabs.html#event:onTabSelect">onTabSelect</a></li><li><a href="component-Toggle.html#event:onChange">onChange</a></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<div id="main">

    <article class="content">

        
        <h1 class="page-title">components/region-picker/region-picker.vue</h1>
        

        




    <section>
        <article>
            <pre class="prettyprint source linenums"><code>&lt;template>
    &lt;div>&lt;/div>
&lt;/template>
&lt;style lang="scss">
    .picker .picker-panel .wheel-wrapper .wheel .wheel-scroll {
        padding: 0;
        margin: 0;
        font-size: 16px;
    }

    .picker .picker-panel .picker-choose .picker-title {
        margin: 0;
    }

    .picker .picker-panel .picker-choose .cancel, .picker .picker-panel .picker-choose .confirm {
        padding: 10px 20px !important;
    }

    .wheel-item {
        display: block; //如果是块儿级元素可以不用加
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }
&lt;/style>
&lt;script type="text/javascript">
  /**
   * @component RegionPicker
   * @description
   *
   * ## 地址选择 / 城市三级组件RegionPicker
   *
   * ### 简介
   *
   * 这个组件使用的是本地数据库, 将better-picker组件封装而来的. 组件支持cityCode获取及筛选, 但是数据库不全, 比如新疆没有库尔勒的选择.
   *
   * ### 不足
   *
   * 这个组件初始化时挂载到`body`之下的, 因此打乱了Vimo组件的挂载约定, 这部分需要对源码修改才能改进.
   *
   * ### 如何引入
   * ```
   * // 引入
   * import { RegionPicker } from 'vimo/components/region-picker'
   * // 使用
   * openCityBetterPicker () {
   *      RegionPicker.present({
   *        selectedCity: ['110000', '110100', '110101'],
   *        title: '请选择',
   *        onSelect (data) {
   *          console.log('onSelect:' + JSON.stringify(data))
   *        },
   *        onCancel (data) {
   *          console.log('onCancel:' + JSON.stringify(data))
   *        }
   *      })
   *    }
   * ```
   *
   * ### Picker组件封装
   *
   * 城市三级选择组件也是用了Picker组件尝试, 但是没有封装, 请参考Demo.
   *
   * @props {Array} selectedCity - 当前选择的城市array, 传入的是code值, 默认为: ['110000', '110100', '110101']
   * @props {String} title - picker的title
   * @props {Function} onSelect - 点击确定触发的钩子
   * @props {Function} onCancel - 点击取消触发的钩子
   * @demo https://dtfe.github.io/vimo-demo/#/city_picker
   *
   * */
  import Picker from 'better-picker'
  import regions from './regions.json'
  import { hashChange, transitionEnd } from '../../util/util'
  export default{
    name: 'RegionPicker',
    data () {
      return {
        provinceCol: [],            // 省份显示的数据列表
        cityCol: [],                // 城市显示的数据列表
        regionCol: [],              // 地区显示的数据列表
        selectedIndex: [],          // 当前选择的列表
        lastSelectCityArrs: [],     // 上一次城市选择的值 ['110000', '110100', '110101']

        isInit: false,
        unreg: null,

        pickerElement: null,
        pickerPanelElement: null
      }
    },
    props: {
      selectedCity: {
        value: Array,
        default () {
          return ['110000', '110100', '110101']
        }
      },
      title: [String],
      onSelect: Function,
      onCancel: Function
    },
    watch: {
      selectedCity (val) {
        if (this.isInit) {
          this.reset(val)
        } else {
          this.init(val)
        }
      }
    },
    methods: {
      // 获取省份列表 520000
      getProvinceCol () {
        let province = []
        regions.forEach((item) => {
          if (item.item_code &amp;&amp; item.item_code.substr(2) === '0000') {
            province.push(this.formatData(item))
          }
        })
        return province
      },
      // 获取城市列表 520D00
      getCityCol (provinceCode) {
        if (!provinceCode) return
        let city = []
        regions.forEach((item) => {
          let _org = item.item_code.substring(0, 3) + item.item_code.substring(4)
          let _dis = provinceCode.substring(0, 3) + provinceCode.substring(4)
          if (_dis === _org &amp;&amp; parseInt(item.item_code[3]) !== 0) {
            city.push(this.formatData(item))
          }
        })
        // city
        return city
      },
      // 获取地区县市列表 520Dxx
      getRegionCol (cityCode) {
        if (!cityCode) return
        let region = []
        regions.forEach((item) => {
          if (item.item_code &amp;&amp; item.item_code.substr(0, 4) === cityCode.substr(0, 4) &amp;&amp; item.item_code.substr(4) !== '00') {
            region.push(this.formatData(item))
          }
        })
        return region
      },
      // 格式化数据
      formatData (item) {
        if (!item) return
        return {
          code: item.item_code,
          value: item.item_code,
          text: item.item_name,
          name: item.item_name
        }
      },
      // 传入城市的code返回他在arr中的index
      getIndexByCode (code, arr) {
        for (var i = 0, len = arr.length; len > i; i++) {
          if (arr[i].code === code) {
            return i
          }
        }
      },

      // 当组件被点击时, 开启picker
      present () {
        this.picker &amp;&amp; this.picker.show()
        return new Promise((resolve) => {
          transitionEnd(this.pickerPanelElement, function () {
            resolve()
          })
        })
      },

      // isLegal
      isLegal (dataArr) {
        let provinceCode = dataArr[0] &amp;&amp; dataArr[0].code
        let cityCode = dataArr[1] &amp;&amp; dataArr[1].code
        let regionCode = dataArr[2] &amp;&amp; dataArr[2].code
        let pc = provinceCode.substr(0, 2)
        if (pc === cityCode.substr(0, 2) &amp;&amp; pc === regionCode.substr(0, 2)) {
          let cc = cityCode.substr(0, 4)
          if (cc === regionCode.substr(0, 4)) {
            this.lastSelectCityArrs = [provinceCode, cityCode, regionCode]
            return true
          }
        }

        // 重新初始化
        this.reset()
        return false
      },

      // 初始化
      init (cityArrs) {
        if (this.isInit) return
        this.isInit = true

        // 清楚残余
        let pickerElements = document.querySelectorAll('body>.picker')
        if (pickerElements.length > 0) {
          pickerElements.forEach((ele) => {
            ele.remove()
          })
        }

        if (!cityArrs || !cityArrs[0] || !cityArrs[1] || !cityArrs[2]) {
          cityArrs = ['110000', '110100', '110101']
        }
        this.lastSelectCityArrs = JSON.parse(JSON.stringify(cityArrs))

        this.provinceCol = this.getProvinceCol()
        this.cityCol = this.getCityCol(cityArrs[0])
        this.regionCol = this.getRegionCol(cityArrs[1])
        this.selectedIndex[0] = this.getIndexByCode(cityArrs[0], this.provinceCol)
        this.selectedIndex[1] = this.getIndexByCode(cityArrs[1], this.cityCol)
        this.selectedIndex[2] = this.getIndexByCode(cityArrs[2], this.regionCol)

        this.picker = new Picker({
          data: [this.provinceCol, this.cityCol, this.regionCol],
          selectedIndex: this.selectedIndex,
          title: this.title
        })

        this.pickerElement = null
        this.pickerPanelElement = null

        // 记录dom
        pickerElements = document.querySelectorAll('body>.picker')

        if (pickerElements.length === 1) {
          this.pickerElement = pickerElements[0]
        } else if (pickerElements.length > 1) {
          this.pickerElement = pickerElements[pickerElements.length - 1]
          pickerElements.forEach((ele) => {
            ele.remove()
          })
        }
        console.assert(this.pickerElement, 'we need this.pickerElement')
        this.pickerPanelElement = this.pickerElement.querySelector('.picker-panel')

        this.picker.on('picker.cancel', () => {
          this.$el.remove()
          transitionEnd(this.pickerPanelElement, () => {
            this.onCancel &amp;&amp; this.onCancel(null)
            this.pickerElement.remove()
            this.pickerElement = null
            this.pickerPanelElement = null
            let pickerElements = document.querySelectorAll('body>.picker')
            if (pickerElements.length > 0) {
              pickerElements.forEach((ele) => {
                ele.remove()
              })
            }
          })
        })

        this.picker.on('picker.select', (selectedVal, selectedIndex) => {
          this.$el.remove()
          let dataArr = []
          let _p = this.provinceCol[selectedIndex[0]]
          let _c = this.cityCol[selectedIndex[1]]
          let _d = this.regionCol[selectedIndex[2]]
          dataArr.push(_p)
          dataArr.push(_c)
          dataArr.push(_d)
          if (this.isLegal(dataArr)) {
            let data = JSON.parse(JSON.stringify(dataArr))
            this.$emit('onSelected', data)
            this.onSelect &amp;&amp; this.onSelect(data)
          }

          transitionEnd(this.pickerPanelElement, () => {
            this.pickerElement.remove()

          })
        })

        this.picker.on('picker.change', (selectedVal, selectedIndex) => {
          if (selectedVal === 0) {
            // 第一列选中, 省份选择
            let province = this.provinceCol[selectedIndex]
            this.cityCol = this.getCityCol(province.code)
            this.regionCol = this.getRegionCol(this.cityCol[0].code)
            this.picker.refillColumn(1, this.cityCol)
            this.picker.refillColumn(2, this.regionCol)
          } else if (selectedVal === 1) {
            // 第一列选中, 城市选择
            this.regionCol = this.getRegionCol(this.cityCol[selectedIndex].code)
            this.picker.refillColumn(2, this.regionCol)
          }
        })

      },

      // 重置
      reset () {
        // 设置index
        let i0 = this.getIndexByCode(this.lastSelectCityArrs[0], this.provinceCol)
        let i1 = this.getIndexByCode(this.lastSelectCityArrs[1], this.cityCol)
        let i2 = this.getIndexByCode(this.lastSelectCityArrs[2], this.regionCol)
        this.picker.selectedIndex = [i0, i1, i2]
        this.picker.selectedVal = JSON.parse(JSON.stringify(this.lastSelectCityArrs))
      },

      // 检查初始化传入的值是否合法
      checkValue (arrs) {
        return arrs &amp;&amp; Array.isArray(arrs) &amp;&amp; arrs.length === 3
      },

      // 页面切换关闭picker, 清除dom残留
      dismissOnPageChangeHandler () {

        this.picker &amp;&amp; this.picker.hide()
        setTimeout(() => {
          this.pickerElement.remove()
        }, 500)
      }
    },
    created () {
      if (this.checkValue(this.selectedCity)) {
        this.init(this.selectedCity)
      }
      // 监听页面变化
      this.unreg = hashChange(this.dismissOnPageChangeHandler)
    }
  }
&lt;/script>
</code></pre>
        </article>
    </section>





    </article>
</div>

<br class="clear">

<footer>
    文档根据<a href="https://github.com/DTFE/Vimo">Vimo源码</a>由<a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a>自动生成, 主题修改自<a href="https://github.com/clenemt/docdash">docdash</a>, 并增加了 @component / @demo / @props / @slot / @usage 增强标注.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
