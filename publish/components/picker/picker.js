"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function PickerFactory(e){var t=(0,_getInsertPosition.getInsertPosition)("sheetPortal").appendChild(document.createElement("div"));return new Picker({el:t,propsData:e})}function getPresentDismissIns(e){return{_i:null,present:function(t){var i=this;return!window.VM.platform.is("alipay")||!window.AlipayJSBridge||t.isH5||1!==t.columns.length&&2!==t.columns.length?(console.info("Picker 组件使用H5模式!"),new _promise2.default(function(n){i._i&&i._i.isActive?i._i.dismiss().then(function(){i._i=e(t),i._i.present().then(function(){n()})}):(i._i=e(t),i._i.present().then(function(){n()}))})):(console.info("Picker 组件使用Alipay模式!"),new _promise2.default(function(e){t.buttons=t.buttons.map(function(e){return(0,_util.isString)(e)?{text:e}:(e.role&&(e.cssRole="picker-toolbar-"+e.role),e)}),t.columns=t.columns.map(function(e){return(0,_util.isPresent)(e.options)||(e.options=[]),e.options=e.options.map(function(e){var t={text:"",value:"",disabled:e.disabled};return(0,_util.isPresent)(e)&&((0,_util.isString)(e)||(0,_util.isNumber)(e)?(t.text=e.toString(),t.value=e):(t.text=(0,_util.isPresent)(e.text)?e.text:e.value,t.value=(0,_util.isPresent)(e.value)?e.value:e.text)),t}),e});var i=t.buttons,n=void 0,o=void 0;"cancel"===i[0].role?(n=i[0],o=i[1]):(n=i[1],o=i[0]);for(var s=t.columns,r=[],u=0,l=[],c=0,a=s.length,d=0,p=a;p>d;d++)0===d&&(r=[],u=s[0].selectedIndex||0,s[0].options.forEach(function(e){r.push(e.text.toString())})),1===d&&(l=[],c=s[1].selectedIndex||0,s[1].options.forEach(function(e){l.push(e.text.toString())}));window.AlipayJSBridge.call("beehiveOptionsPicker",{title:"",positiveString:o.text,negativeString:n.text,optionsOne:r,optionsTwo:l,selectedOneIndex:u,selectedTwoIndex:c},function(e){var t={};e.selectedOneOption?(e.selectedOneOption&&(t[s[0].name]={text:s[0].options[e.selectedOneIndex].text,value:s[0].options[e.selectedOneIndex].value,columnIndex:parseInt(e.selectedOneIndex)}),e.selectedTwoOption&&(t[s[1].name]={text:s[1].options[e.selectedTwoIndex].text,value:s[1].options[e.selectedTwoIndex].value,columnIndex:parseInt(e.selectedTwoIndex)}),o.handler&&o.handler(t)):n.handler&&n.handler(t)}),e()}))},dismiss:function(){var e=this;return new _promise2.default(function(t){e._i&&e._i.isActive?e._i.dismiss().then(function(){t()}):t()})},refresh:function(){this._i&&this._i.refresh()},resetColumn:function(e){this._i&&this._i.resetColumn(e)}}}Object.defineProperty(exports,"__esModule",{value:!0});var _promise=require("babel-runtime/core-js/promise"),_promise2=_interopRequireDefault(_promise),_vue=require("vue"),_vue2=_interopRequireDefault(_vue),_getInsertPosition=require("../../util/getInsertPosition"),_util=require("../../util/util"),_picker=require("./picker.vue"),_picker2=_interopRequireDefault(_picker),Picker=_vue2.default.extend(_picker2.default),methods=getPresentDismissIns(PickerFactory);exports.default=methods;