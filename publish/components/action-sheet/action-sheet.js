"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function ActionSheetFactory(t){var e=(0,_getInsertPosition.getInsertPosition)("sheetPortal").appendChild(document.createElement("div"));return new ActionSheet({el:e,propsData:t})}function getPresentDismissIns(t){return{_i:null,present:function(e){var n=this,i=window.VM.platform.is("alipay")&&window.AlipayJSBridge&&!e.isH5,o=window.VM.platform.is("dingtalk")&&window.dd&&!e.isH5,s=window.VM.platform.is("dtdream")&&window.dd&&!e.isH5;if(e.buttons.length<9){for(var u=[],r={text:"取消",role:"cancel",handler:function(){}},d=-1,a=0;e.buttons.length>a;a++)"cancel"===e.buttons[a].role?(r=e.buttons[a],e.buttons.splice(a,1),a--):"destructive"===e.buttons[a].role?(d=a,u.push(e.buttons[a].text)):u.push(e.buttons[a].text);if(e.buttons.push(r),i)return console.info("ActionSheet 组件使用Alipay模式!"),new _promise2.default(function(t){window.AlipayJSBridge&&window.AlipayJSBridge.call("actionSheet",{title:e.title||"",btns:u||[],cancelBtn:r.text||"取消",destructiveBtnIndex:d||-1},function(t){-1!==t.index?e.buttons[t.index]&&e.buttons[t.index].handler&&e.buttons[t.index].handler():r.handler&&r.handler()}),t()});if(o)return console.info("ActionSheet 组件使用DingTalk模式!"),new _promise2.default(function(t){window.dd.device.notification.actionSheet({title:e.title||"",cancelButton:r.text||"取消",otherButtons:u||[],onSuccess:function(t){-1!==t.buttonIndex?e.buttons[t.buttonIndex]&&e.buttons[t.buttonIndex].handler&&e.buttons[t.buttonIndex].handler():r.handler&&r.handler()}}),t()});if(s)return console.info("ActionSheet 组件使用 DtDream 模式!"),new _promise2.default(function(t){window.dd.device.notification.actionSheet({title:e.title||"",cancelButton:r.text||"取消",otherButtons:u||[],onSuccess:function(t){-1!==t.buttonIndex?e.buttons[t.buttonIndex]&&e.buttons[t.buttonIndex].handler&&e.buttons[t.buttonIndex].handler():r.handler&&r.handler()}}),t()})}return console.info("ActionSheet 组件使用H5模式!"),new _promise2.default(function(i){n._i&&n._i.isActive?n._i.dismiss().then(function(){n._i=t(e),n._i.present().then(function(){i()})}):(n._i=t(e),n._i.present().then(function(){i()}))})},dismiss:function(){var t=this;return new _promise2.default(function(e){t._i&&t._i.isActive?t._i.dismiss().then(function(){e()}):e()})}}}Object.defineProperty(exports,"__esModule",{value:!0});var _promise=require("babel-runtime/core-js/promise"),_promise2=_interopRequireDefault(_promise),_vue=require("vue"),_vue2=_interopRequireDefault(_vue),_getInsertPosition=require("../../util/getInsertPosition"),_actionSheet=require("./action-sheet.vue"),_actionSheet2=_interopRequireDefault(_actionSheet),ActionSheet=_vue2.default.extend(_actionSheet2.default),actionsheetInstance=getPresentDismissIns(ActionSheetFactory);exports.default=actionsheetInstance;