"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function ModalFactory(e){return new Modal({el:(0,_getInsertPosition.getInsertPosition)("modalPortal").appendChild(document.createElement("div")),propsData:e})}function present(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};isModalEnable=!1;var t=ModalFactory(e),r=t.present();return window.history.pushState({id:(new Date).getTime()},"",""),modalArr.push(t),0===unRegisterUrlChange.length&&(0,_util.registerListener)(window,"popstate",function(){if(isModalEnable){var e=modalArr.pop();e&&e.dismiss(),0===modalArr.length&&unregisterAllListener()}},{},unRegisterUrlChange),r.then(function(){isModalEnable=!0}),r}function dismiss(e){return isModalEnable=!1,new Promise(function(t){var r=modalArr.pop();0===modalArr.length&&unregisterAllListener(),window.history.back(),r.dismiss(e).then(function(){isModalEnable=!0,t()})})}function unregisterAllListener(){unRegisterUrlChange.forEach(function(e){return e&&e()}),unRegisterUrlChange=[]}Object.defineProperty(exports,"__esModule",{value:!0});var _vue=require("vue"),_vue2=_interopRequireDefault(_vue),_getInsertPosition=require("../../util/getInsertPosition"),_util=require("../../util/util"),_modal=require("./modal.vue"),_modal2=_interopRequireDefault(_modal),modalArr=[],unRegisterUrlChange=[],Modal=_vue2.default.extend(_modal2.default),isModalEnable=!0;exports.default={present:present,dismiss:dismiss};