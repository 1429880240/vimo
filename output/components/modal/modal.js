"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function ModalFactory(e){var t=document.getElementById(DOM_INSERT_POSITION)||document.getElementById(DOM_INSERT_POSITION_FALLBACK)||document.body;return new Modal({el:t.appendChild(document.createElement("div")),name:e.name,position:e.position})}function present(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};navState=1;var t=e.template,r=e.modalData,n=e.onDismiss,o=e.name||"",i=e.position||"bottom",a=ModalFactory({name:o,position:i}),l=a._present(),s=_vue2.default.extend(t),u=void 0,_=a.$el.querySelectorAll(".modalPageLoadPort")[0].appendChild(document.createElement("div"));return window.setTimeout(function(){var e=function(e){function t(e){(0,_classCallCheck3.default)(this,t);var r=(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).call(this,e));if((0,_util.isObject)(e))for(var n in e)r[n]=e[n];return r}return(0,_inherits3.default)(t,e),t}(s);u=new e({el:_,modalData:r}),window.history.pushState({id:u._uid},"","")},0),_modalArr.push({modalInstance:a,template:e.template,templateInstance:u,modalData:r,onDismiss:n}),0==_unRegisterUrlChange.length&&(0,_util.registerListener)(window,"popstate",function(){if(0===navState){var e=_modalArr.pop();e&&e.modalInstance._dismiss(),0===_modalArr.length&&unregisterAllListener()}},{},_unRegisterUrlChange),window.setTimeout(function(){navState=0},400),l}function dismiss(e){navState=1;var t=_modalArr.pop(),r=t.modalInstance;return t.onDismiss&&t.onDismiss(e),0===_modalArr.length&&unregisterAllListener(),window.history.back(-1),window.setTimeout(function(){navState=0},400),r._dismiss()}function unregisterAllListener(){_unRegisterUrlChange.forEach(function(e){return e&&e()}),_unRegisterUrlChange=[]}Object.defineProperty(exports,"__esModule",{value:!0});var _getPrototypeOf=require("babel-runtime/core-js/object/get-prototype-of"),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=require("babel-runtime/helpers/classCallCheck"),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn"),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=require("babel-runtime/helpers/inherits"),_inherits3=_interopRequireDefault(_inherits2),_vue=require("vue"),_vue2=_interopRequireDefault(_vue),_modal=require("./modal.vue"),_modal2=_interopRequireDefault(_modal),_util=require("../../util/util"),_modalArr=[],_unRegisterUrlChange=[],ModalConstructor=_vue2.default.extend(_modal2.default),DOM_INSERT_POSITION="modalPortal",DOM_INSERT_POSITION_FALLBACK="app",navState=0,Modal=function(e){function t(e){(0,_classCallCheck3.default)(this,t);var r=(0,_possibleConstructorReturn3.default)(this,(t.__proto__||(0,_getPrototypeOf2.default)(t)).call(this,e));if((0,_util.isObject)(e))for(var n in e)r[n]=e[n];return r}return(0,_inherits3.default)(t,e),t}(ModalConstructor);exports.default={present:present,dismiss:dismiss};