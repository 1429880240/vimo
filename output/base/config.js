"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function setupConfig(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(window.VM&&window.VM.config)return window.VM.config;var i=new Config;return i.init(e,t),window.VM=window.VM||{},window.VM.config=i,i}Object.defineProperty(exports,"__esModule",{value:!0});var _classCallCheck2=require("babel-runtime/helpers/classCallCheck"),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=require("babel-runtime/helpers/createClass"),_createClass3=_interopRequireDefault(_createClass2),_typeof2=require("babel-runtime/helpers/typeof"),_typeof3=_interopRequireDefault(_typeof2);exports.setupConfig=setupConfig;var isFunction=function(e){return"function"==typeof e},isDefined=function(e){return void 0!==e},isObject=function(e){return"object"===(void 0===e?"undefined":(0,_typeof3.default)(e))},isArray=Array.isArray,URL_CONFIG_PREFIX="vm",Config=function(){function e(){(0,_classCallCheck3.default)(this,e),this._c={},this._s={},this.plt}return(0,_createClass3.default)(e,[{key:"init",value:function(e,t){this._s=e&&isObject(e)&&!isArray(e)?e:{},this.plt=t}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this.plt;if(!isDefined(this._c[e])){if(!isDefined(e))throw"config key is not defined";var s=void 0,n=this._s[e],r=void 0,l=null;if(i){var a=i.getQueryParam(URL_CONFIG_PREFIX+e);if(isDefined(a))return this._c[e]="true"===a||"false"!==a&&a;for(var o=i.platforms(),u=0,f=o.length;u<f;u++)this._s.platforms&&(l=this._s.platforms[o[u]])&&isDefined(l[e])&&(s=l[e]),(l=i.getPlatformConfig(o[u]))&&l.settings&&isDefined(l.settings[e])&&(r=l.settings[e])}this._c[e]=isDefined(s)?s:isDefined(n)?n:isDefined(r)?r:null}var c=this._c[e];return isFunction(c)&&(c=c(i)),null!==c?c:t}},{key:"getBoolean",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.get(e);return null===i?t:"string"==typeof i?"true"===i:!!i}},{key:"getNumber",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0/0,i=parseFloat(this.get(e));return isNaN(i)?t:i}},{key:"set",value:function(){var e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1];switch(arguments.length){case 2:this._s[e]=t,delete this._c[e];break;case 3:this._s.platforms=this._s.platforms||{},this._s.platforms[e]=this._s.platforms[e]||{},this._s.platforms[e][t]=arguments.length<=2?void 0:arguments[2],delete this._c[t]}return this}},{key:"settings",value:function(e,t){switch(arguments.length){case 0:return this._s;case 1:this._s=e,this._c={};break;case 2:this._s.platforms=this._s.platforms||{},this._s.platforms[e]=t,this._c={}}return this}}]),e}();